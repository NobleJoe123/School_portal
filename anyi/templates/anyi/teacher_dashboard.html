{% load static %}

<!DOCTYPE html>
<html lang="en">

<head>
    <title>Anyi's College</title>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <!-- Stylesheets -->
    <link rel="stylesheet" href="{% static 'anyi/css/index.css' %}" type="text/css">
    <link rel="stylesheet" href="{% static 'anyi/main/css/drop.css' %}">
    <link rel="stylesheet" class="alternate-style" title="pink" href="{% static 'anyi/main/css/skins/pink.css' %}"
        type="text/css" disabled>

    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.6.0/css/regular.min.css">


    <link rel="stylesheet" class="alternate-style" title="blue" href="{% static 'anyi/main/css/skins/blue.css' %}"
        type="text/css" disabled>
    <link rel="stylesheet" class="alternate-style" title="orange" href="{% static 'anyi/main/css/skins/orange.css' %}"
        type="text/css" disabled>
    <link rel="stylesheet" class="alternate-style" title="yellow" href="{% static 'anyi/main/css/skins/yellow.css' %}"
        type="text/css" disabled>
    <link rel="stylesheet" class="alternate-style" title="green" href="{% static 'anyi/main/css/skins/green.css' %}"
        type="text/css" disabled>
    <link rel="stylesheet" href="{% static 'anyi/main/css/styleSwitcher.css' %}" type="text/css">
</head>

<body>

    <!-- Loader -->
    <div class="preloaded">
        <div class="loader"></div>
    </div>

    <!-- Main Container -->
    <div class="main-container">
        <!-- Sidebar Navigation -->
        <aside class="aside">
            <div class="logo">
                <a href="{% url 'home' %}">{{ firstname }} {{ surname }}</a>
            </div>
            <div class="nav-toggle"><span></span></div>
            <ul class="nav">
                <li><a href="#profile" onclick="showSection('profile')" class="active"><i
                            class="fa fa-user"></i>Profile</a></li>
                <li><a href="#atten" onclick="showSection('atten')"><i class="fa fa-calendar"></i>Attendance</a></li>
                <li class="dropdown"><button class="dropbtn"><a href="#test" onclick="showSection('test')"><i
                                class="fa fa-book"></i>Test<i class="fa fa-caret-down"></i></a></button>
                    <!-- <div class="dropdown-content">
                        <a href="#ca1">CA1</a>
                        <a href="#ca2">CA2</a>
                        <a href="#ca3">CA3</a>
                    </div> -->
                </li>
                <li><a href="#exam" onclick="showSection('exam')"><i class="fa fa-paper"></i>Examination</a></li>
                <li><a href="#assign" onclick="showSection('assign')"><i class="fa fa-tasks"></i>Assignment</a></li>
                <li><a href="#news" onclick="showSection('news')"><i class="fa-regular fa-newspaper"></i>News</a></li>
                <li><a href="#message" onclick="showSection('message')"><i class="fa fa-envelope"></i>Messages</a></li>
                <li><a href="#notify" onclick="showSection('notify')"><i class="fa fa-bell"></i>Notifications</a></li>
                <li><a href="#report" onclick="showSection('report')"><i class="fa fa-file-alt"></i>Reports</a></li>
                <li><a href="#result" onclick="showSection('result')"><i class="fa fa-chart-line"></i>Results</a></li>
                <li><a href="{% url 'home' %}"><i class="fa fa-sign-out"></i>Logout</a></li>
            </ul>
            <div class="copyright-text" style="color: #0dcaf0;">
                &copy; @Jascube Technologies
            </div>
        </aside>

        <!-- Main Content -->
        <div class="main-content">
            <!-- Profile Section -->
            <section class="section active profile" id="profile">
                <div class="container">
                    <div class="intro">
                        <img src="{{ image_url }}" alt="Profile Picture" class="shadow-dark" width="120px"
                            height="120px" style="border-radius: 60px;">
                        <h1>{{ firstname }} {{ surname }}</h1>
                        <div class="social-links">
                            <a href="https://twitter.com/kalexdonia93" target="_blank"><i class="fa fa-twitter"></i></a>
                            <a href="https://www.facebook.com/john.adeyemi2/" target="_blank"><i
                                    class="fa fa-facebook"></i></a>
                            <a href="#" target="_blank"><i class="fa fa-instagram"></i></a>
                            <a href="https://www.linkedin.com/in/adeyemi-john-56b47993/" target="_blank"><i
                                    class="fa fa-linkedin"></i></a><br>
                            <button class="edit">Update</button>
                        </div>
                    </div>
                </div>
            </section>

            <!-- Additional Sections (Example Structure) -->
            <section class="section" id="atten">
                <div class="container atten">
                    <div id="term1-section" class="term-section active">
                        <h2>1st Term Attendance</h2>
                        <form id="term1-form">
                            <table>
                                <thead>
                                    <tr>
                                        <th>S/N</th>
                                        <th>Student Name</th>
                                        {% for week in weeks %}
                                        <th>Wk {{ week }}</th>
                                        {% endfor %}
                                    </tr>
                                </thead>
                                <tbody>
                                    {% for student in data %}
                                    <tr>
                                        <td>{{ forloop.counter }}</td>
                                        <td>{{ student.firstname }} {{ student.surname }}</td>
                                        {% for week in weeks %}
                                        <td>
                                            <div class="checkbox-group">
                                                {% for i in check %}
                                                <input type="checkbox"
                                                    name="term1_{{ student.id }}_week{{ week }}_{{ i }}"
                                                    id="term1_{{ student.id }}_week{{ week }}_{{ i }}">
                                                {% endfor %}
                                            </div>
                                        </td>
                                        {% endfor %}
                                    </tr>
                                    {% endfor %}
                                </tbody>
                            </table>
                            <button type="button" class="termbtn" onclick="submitAttendance('term1')">Submit 1st Term</button>
                        </form>
                    </div>

                    <!-- Second Term Section -->
                    <div id="term2-section" class="term-section">
                        <h2>2nd Term Attendance</h2>
                        <form id="term2-form">
                            <table>
                                <thead>
                                    <tr>
                                        <th>S/N</th>
                                        <th>Student Name</th>
                                        {% for week in weeks %}
                                        <th>Wk {{ week }}</th>
                                        {% endfor %}
                                    </tr>
                                </thead>
                                <tbody>
                                    {% for student in data %}
                                    <tr>
                                        <td>{{ forloop.counter }}</td>
                                        <td>{{ student.firstname }} {{ student.surname }}</td>
                                        {% for week in weeks %}
                                        <td>
                                            <div class="checkbox-group">
                                                {% for i in check %}
                                                <input type="checkbox"
                                                    name="term2_{{ student.id }}_week{{ week }}_{{ i }}"
                                                    id="term2_{{ student.id }}_week{{ week }}_{{ i }}">
                                                {% endfor %}
                                            </div>
                                        </td>
                                        {% endfor %}
                                    </tr>
                                    {% endfor %}
                                </tbody>
                            </table>
                            <button type="button" class="termbtn" onclick="submitAttendance('term2')">Submit 2nd Term</button>
                        </form>
                    </div>

                    <!-- Third Term Section -->
                    <div id="term3-section" class="term-section">
                        <h2>3rd Term Attendance</h2>
                        <form id="term3-form">
                            <table>
                                <thead>
                                    <tr>
                                        <th>S/N</th>
                                        <th>Student Name</th>
                                        {% for week in weeks %}
                                        <th>Wk {{ week }}</th>
                                        {% endfor %}
                                    </tr>
                                </thead>
                                <tbody>
                                    {% for student in data %}
                                    <tr>
                                        <td>{{ forloop.counter }}</td>
                                        <td>{{ student.firstname }} {{ student.surname }}</td>
                                        {% for week in weeks %}
                                        <td>
                                            <div class="checkbox-group">
                                                {% for i in check %}
                                                <input type="checkbox"
                                                    name="term3_{{ student.id }}_week{{ week }}_{{ i }}"
                                                    id="term3_{{ student.id }}_week{{ week }}_{{ i }}">
                                                {% endfor %}
                                            </div>
                                        </td>
                                        {% endfor %}
                                    </tr>
                                    {% endfor %}
                                </tbody>
                            </table>
                            <button type="button" class="termbtn" onclick="submitAttendance('term3')">Submit 3rd Term</button>
                        </form>
                    </div>
                </div>
            </section>

            <section class="section" id="test">
                <div class="container">
                    <h2>Test Section</h2>
                    <p>Test details go here.</p>
                </div>
            </section>
            <section class="section" id="exam">
                <div class="container">
                    <h2>Examination Section</h2>
                    <p>Examination details go here.</p>
                </div>
            </section>
            <section class="section" id="assign">
                <div class="container">
                    <h2>Assignment Section</h2>
                    <p>Assignment details go here.</p>
                </div>
            </section>
            <section class="section" id="news">
                <div class="container">
                    <h2>News Section</h2>
                    <p>News details go here.</p>
                </div>
            </section>
            <section class="section" id="message">
                <div class="container">
                    <h2>Messages Section</h2>
                    <p>Messages details go here.</p>
                </div>
            </section>
            <section class="section" id="notify">
                <div class="container">
                    <h2>Notification Section</h2>
                    <p>Notification details go here.</p>
                </div>
            </section>
            <section class="section" id="report">
                <div class="container">
                    <h2>Reports Section</h2>
                    <p>Reports details go here.</p>
                </div>
            </section>
            <section class="section" id="result">
                <div class="container">
                    <h2>Results Section</h2>
                    <p>Results details go here.</p>
                </div>
            </section>



            <!-- Add more sections as needed -->

            <!-- Style Switcher -->
            <div class="style-switcher">
                <div class="toggle-style-switcher"><i class="fa fa-cog fa-spin"></i></div>
                <h5>Style Switcher</h5>
                <ul>
                    <li><a href="Javascript:void(0);" title="pink" style="background-color: #ec1839"
                            onclick="setActiveStyle('pink')"></a></li>
                    <li><a href="Javascript:void(0);" title="blue" style="background-color: #0dcaf0"
                            onclick="setActiveStyle('blue')"></a></li>
                    <li><a href="Javascript:void(0);" title="orange" style="background-color: #fa5b0f"
                            onclick="setActiveStyle('orange')"></a></li>
                    <li><a href="Javascript:void(0);" title="yellow" style="background-color: #ffb400"
                            onclick="setActiveStyle('yellow')"></a></li>
                    <li><a href="Javascript:void(0);" title="green" style="background-color: #72b626"
                            onclick="setActiveStyle('green')"></a></li>
                </ul>
                <h5>Body Skin</h5>
                <label>
                    <input type="radio" class="body-skin" name="body-style" value="light" checked="true"> Light
                </label>
                <label>
                    <input type="radio" class="body-skin" name="body-style" value="dark"> Dark
                </label>
            </div>
        </div>
    </div>

    <!-- JavaScript -->
    <script src="{% static 'anyi/main/js/script.js' %}"></script>
    <script src="{% static 'anyi/main/js/styleSwitcher.js' %}"></script>

    <script>
        function showSection(sectionId) {
            // Hide all sections
            document.querySelectorAll('.section').forEach(section => {
                section.classList.remove('active');
            });

            // Remove active class from all navbar links
            document.querySelectorAll('.nav a').forEach(link => {
                link.classList.remove('active');
            });

            // Show the clicked section and add active class to the navbar link
            document.getElementById(sectionId).classList.add('active');
            document.querySelector(`.nav a[href="#${sectionId}"]`).classList.add('active');
        }



        // Function to submit attendance and display the next term
        function submitAttendance(term) {
            const formId = `${term}-form`;
            const form = document.getElementById(formId);
            const formData = new FormData(form);

            // Simulate sending data to the server (you'd replace this with an actual POST request)
            fetch('/submit-attendance/', {
                method: 'POST',
                body: formData,
                headers: {
                    'X-CSRFToken': '{{ csrf_token }}' // Include CSRF token for Django
                }
            })
                .then(response => {
                    if (response.ok) {
                        // Hide the current term
                        document.getElementById(`${term}-section`).classList.remove('active');

                        // Show the next term section
                        if (term === 'term1') {
                            document.getElementById('term2-section').classList.add('active');
                        } else if (term === 'term2') {
                            document.getElementById('term3-section').classList.add('active');
                        } else {
                            alert("All terms completed!");
                        }
                    } else {
                        alert('Error submitting attendance. Please try again.');
                    }
                })
                .catch(error => {
                    console.error('Error:', error);
                    alert('Something went wrong!');
                });
        }





        // // Function to show the next term's section
        // function showNextTerm(currentButtonId, nextSectionId) {
        //     document.getElementById(currentButtonId).addEventListener("click", function () {
        //         document.getElementById(nextSectionId).classList.add("active");
        //         this.style.display = "none"; // Hide current button
        //     });
        // }

        // // Setup buttons for each term
        // showNextTerm("submit-term1", "term2-section");
        // showNextTerm("submit-term2", "term3-section");



    </script>
</body>

</html>